{
  "name": "chordNode_getApptSlots",
  "description": "This tool is used to fetch the appointment slots available for patients to book a new appointment at the medical practice. This tool MUST be called after appointment type and facility have been validated. Both startDate and endDate parameters are REQUIRED. The response contains appointment slot objects with fields: time (Appointment_Start_Time), end_time (Appointment_End_Time), operatory_id (operatoryId), and providerId. When a caller selects an appointment slot, the selected slot object MUST be stored in the [$selected_appointment] variable before calling chordNode_createAppt_v2.",
  "color": "linear-gradient(rgb(79,179,208), rgb(3,232,46))",
  "iconSrc": "",
  "schema": "[{\"id\":0,\"property\":\"startDate\",\"description\":\"The start date for the appointment search range in YYYY-MM-DD format. This is REQUIRED. Calculate based on caller preferences: 'next week' = first day of next week (Monday), 'this week' = today's date, 'tomorrow' = tomorrow's date, specific date = use that date, default = today's date.\",\"type\":\"string\",\"required\":true},{\"id\":1,\"property\":\"endDate\",\"description\":\"The end date for the appointment search range in YYYY-MM-DD format. This is REQUIRED. Calculate based on caller preferences: 'next week' = last day of next week (Sunday), 'this week' = last day of this week (Sunday), 'tomorrow' = tomorrow's date, specific date range = use end date, default = today's date + 30 days.\",\"type\":\"string\",\"required\":true},{\"id\":2,\"property\":\"providerId\",\"description\":\"Optional provider ID to filter appointments by specific provider.\",\"type\":\"string\",\"required\":false},{\"id\":3,\"property\":\"appointmentTypeId\",\"description\":\"Optional appointment type ID to filter appointments by specific appointment type.\",\"type\":\"string\",\"required\":false}]",
  "func": "const fetch = require('node-fetch');\nconst startDate = $startDate;\nconst endDate = $endDate;\nconst providerId = $providerId || null;\nconst appointmentTypeId = $appointmentTypeId || null;\n\nconst url = `https://c1-aicoe-nodered-lb.prod.c1conversations.io/FabricWorkflow/api/exposed/chord/getApptSlots`;\n\nconst params = new URLSearchParams();\nparams.append('startDate', startDate);\nparams.append('endDate', endDate);\nif (providerId) {\n    params.append('providerId', providerId);\n}\nif (appointmentTypeId) {\n    params.append('appointmentTypeId', appointmentTypeId);\n}\n\nconst fullUrl = `${url}?${params.toString()}`;\n\ntry {\n    const response = await fetch(fullUrl, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    });\n    \n    const result = await response.json();\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n    return JSON.stringify(result);\n} catch (error) {\n    console.error('getApptSlots error:', error);\n    return JSON.stringify({\n        \"error\": \"getApptSlots Error: \" + error,\n        \"message\": \"Errored\"\n    });\n}",
  "workspaceId": "9e7c759d-2623-4529-945d-6c578631aad0"
}