{
  "name": "chordNode_createAppt_v2",
  "description": "Use this tool to create a new appointment for a patient. This tool MUST be called AFTER the caller has selected an appointment slot from the options returned by chordNode_getApptSlots. CRITICAL: The appointmentTime parameter MUST be retrieved from [$selected_appointment.time] and the operatoryId parameter MUST be retrieved from [$selected_appointment.operatory_id]. The [$selected_appointment] variable MUST be populated with the selected appointment slot object from chordNode_getApptSlots response BEFORE calling this tool. This tool will FAIL if operatoryId is missing or incorrect. NEVER use placeholder values, example values, or fabricated data - ONLY use actual values from the [$selected_appointment] variable.",
  "color": "linear-gradient(rgb(90,170,233), rgb(202,153,106))",
  "iconSrc": "",
  "schema": "[{\"id\":0,\"property\":\"appointmentTime\",\"description\":\"The appointment start time. This MUST be retrieved from [$selected_appointment.time] - the 'time' field from the selected appointment slot object returned by chordNode_getApptSlots. This is the Appointment_Start_Time. NEVER use placeholder values or fabricated data - ONLY use the actual value from [$selected_appointment.time].\",\"type\":\"string\",\"required\":true},{\"id\":1,\"property\":\"operatoryId\",\"description\":\"The operatory ID for the appointment slot. This MUST be retrieved from [$selected_appointment.operatory_id] - the 'operatory_id' field from the selected appointment slot object returned by chordNode_getApptSlots. This is REQUIRED and the tool WILL FAIL without it. NEVER use placeholder values like '[operatory_id_for_first_slot]', NEVER use descriptions, NEVER use example values - ONLY extract the actual literal value from [$selected_appointment.operatory_id].\",\"type\":\"string\",\"required\":true}]",
  "func": "const fetch = require('node-fetch');\nconst url = `https://c1-aicoe-nodered-lb.prod.c1conversations.io/FabricWorkflow/api/exposed/chord/createAppt_v2`;\nconst apptTime = $appointmentTime;\nconst operatoryId = $operatoryId;\n\nasync function createAppt() {\n    try {\n        const response = await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                apptTime: apptTime,\n                operatoryId: operatoryId\n            })\n        });\n        \n        if (!response.ok) {\n            const errorText = await response.text().catch(() => 'Unable to read error response');\n            throw new Error(`HTTP ${response.status}: ${response.statusText} - ${errorText}`);\n        }\n        \n        const result = await response.json();\n        return JSON.stringify(result);\n    } catch (error) {\n        console.error('createAppointment error:', error);\n        return JSON.stringify({\n            \"error\": error.message || String(error)\n        });\n    }\n}\n\nreturn createAppt();",
  "workspaceId": "9e7c759d-2623-4529-945d-6c578631aad0"
}