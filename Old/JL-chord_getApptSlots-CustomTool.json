{
  "name": "JL-chord_getApptSlots",
  "description": "This tool is used to fetch the appointment slots available for patients to book a new appointment at the medical practice.",
  "color": "linear-gradient(rgb(123,248,1), rgb(39,89,187))",
  "iconSrc": "",
  "schema": "[]",
  "func": "const fetch = require('node-fetch');\n\n// Get input parameters\nconst startDate = \"2026-04-13\";\nconst providerId = \"223076809\";\nconst locationId = \"77523\";\n\nconst apiKey = `dXNlci0yNzQtcHJvZHVjdGlvbg.eqAjEe1KyadP0pZ56bNbULBObZG3VKqU`;\n\nlet myHeaders = new Headers();\nmyHeaders.append(\"Accept\", \"application/vnd.Nexhealth+json;version=2\");\nmyHeaders.append(\"Authorization\", apiKey);\n\nconst requestOptions = {\n    method: \"POST\",\n    headers: myHeaders,\n    redirect: \"follow\"\n};\n\n// Return the promise chain so the result is properly returned\nreturn fetch(\"https://nexhealth.info/authenticates\", requestOptions)\n    .then((response) => response.json())\n    .then((authResult) => {\n        const authToken = authResult.data.token;\n\n        // Now make the second request with the auth token\n        const apptHeaders = new Headers();\n        apptHeaders.append(\"Accept\", \"application/vnd.Nexhealth+json;version=2\");\n        apptHeaders.append(\"Authorization\", `Bearer ${authToken}`);\n\n        const apptRequestOptions = {\n            method: \"GET\",\n            headers: apptHeaders,\n            redirect: \"follow\"\n        };\n\n        return fetch(\"https://nexhealth.info/appointment_slots?subdomain=cdm&lids[]=\" + locationId + \"&pids[]=\" + providerId + \"&start_date=\" + startDate + \"&days=\" + days, apptRequestOptions);\n    })\n    .then((response) => response.json())\n    .then((result) => {\n        if (result.data && result.data[0] && result.data[0].slots) {\n            const apptSlots = result.data[0].slots;\n            return JSON.stringify(apptSlots);\n        } else {\n            return JSON.stringify([]);\n        }\n    })\n    .catch((error) => {\n        console.error('Error:', error);\n        return JSON.stringify({ error: error.message });\n    });",
  "workspaceId": "9e7c759d-2623-4529-945d-6c578631aad0"
}