{
  "name": "chord_createAppointment",
  "description": "Use this tool to create a new appointment for a patient. You must pass in the appointment slot time to create an appointment.",
  "color": "linear-gradient(rgb(37,200,203), rgb(228,58,251))",
  "iconSrc": "",
  "schema": "[{\"id\":0,\"property\":\"appointmentTime\",\"description\":\"This is the time for the new appointment to be created.\",\"type\":\"string\",\"required\":true}]",
  "func": "const fetch = require('node-fetch');\nconst startTime = $appointmentTime;\n//const startTime = \"2025-11-20T09:15:00.000-05:00\";\n\n\nconst apiKey = `dXNlci0yNzQtcHJvZHVjdGlvbg.eqAjEe1KyadP0pZ56bNbULBObZG3VKqU`;\n\n\nlet myHeaders = new Headers();\nmyHeaders.append(\"Accept\", \"application/vnd.Nexhealth+json;version=2\");\nmyHeaders.append(\"Authorization\", apiKey);\n//myHeaders.append(\"Cookie\", \"__cf_bm=hy3qkSkXq2pmQppF01uLuhrt1hI205qDpX.T03.7OqI-1763154667-1.0.1.1-uEuMXhwONta7SHNKzZbHyin2XumqpIzQGwYZuH_T5m6nul7M6um7EMRUTzIwN4nmtn.0dev2gbVb85aMxAknsC.5N23EGs6G4cr1ezAzXCQ; api_user.id=eyJfcmFpbHMiOnsibWVzc2FnZSI6Ik5UVTIiLCJleHAiOm51bGwsInB1ciI6ImNvb2tpZS5hcGlfdXNlci5pZCJ9fQ%3D%3D--add7fc10087e0e5d97af9baab678ecd31aebaf28\");\n\nconst requestOptions = {\n    method: \"POST\",\n    headers: myHeaders,\n    redirect: \"follow\"\n};\n\n// First, authenticate to get the token\nfetch(\"https://nexhealth.info/authenticates\", requestOptions)\n    .then((response) => response.json())\n    .then((authResult) => {\n        console.log('Auth response:', authResult);\n        const authToken = authResult.data.token;\n        console.log('Auth Token:', authToken);\n\n        // Now create the appointment with the auth token\n        const apptHeaders = new Headers();\n        apptHeaders.append(\"Content-Type\", \"application/json\");\n        apptHeaders.append(\"Accept\", \"application/vnd.Nexhealth+json;version=2\");\n        apptHeaders.append(\"Authorization\", \"Bearer \" + authToken);\n\n        const raw = JSON.stringify({\n            \"appt\": {\n                \"patient_id\": 425105043,\n                \"provider_id\": 421458314,\n                \"start_time\": startTime,\n                \"operatory_id\": 208834,\n                \"note\": \"Schedule by AI\"\n            },\n            \"appointments_per_timeslot\": 1\n        });\n\n        const apptRequestOptions = {\n            method: \"POST\",\n            headers: apptHeaders,\n            body: raw,\n            redirect: \"follow\"\n        };\n\n        return fetch(\"https://nexhealth.info/appointments?subdomain=cdm&location_id=333724&notify_patient=false\", apptRequestOptions);\n    })\n    .then((response) => response.json())\n    .then((result) => {\n        console.log('Appointment created:', result);\n        const apptResult = result;\n        console.log(apptResult);\n        return apptResult;\n    })\n    .catch((error) => console.error('Error:', error));",
  "workspaceId": "9e7c759d-2623-4529-945d-6c578631aad0"
}