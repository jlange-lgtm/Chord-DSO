{
  "name": "SchedulingAPI",
  "description": "Comprehensive scheduling API for managing appointments. Provides access to Dentrix and Cloud 9 systems for checking availability, creating appointments, updating appointment status, retrieving appointments, and deleting appointments. Handles all appointment-related operations.",
  "color": "linear-gradient(rgb(68,211,235), rgb(86,81,165))",
  "iconSrc": "",
  "schema": "[{\"id\":0,\"property\":\"operation\",\"type\":\"string\",\"description\":\"Operation to perform: 'checkAvailability', 'createAppointment', 'updateAppointment', 'retrieveAppointments', 'deleteAppointment', 'checkEligibility' (required)\",\"required\":true},{\"id\":1,\"property\":\"patientId\",\"type\":\"string\",\"description\":\"Patient ID for appointment operations\",\"required\":false},{\"id\":2,\"property\":\"appointmentId\",\"type\":\"string\",\"description\":\"Appointment ID for update/delete operations\",\"required\":false},{\"id\":3,\"property\":\"appointmentType\",\"type\":\"string\",\"description\":\"Type of appointment: 'Cleaning', 'New Patient Exam', 'Ortho Consult', 'Baby Wellness', 'Emergency' (required for create/checkAvailability)\",\"required\":false},{\"id\":4,\"property\":\"preferredDate\",\"type\":\"string\",\"description\":\"Preferred date in YYYY-MM-DD format (for checkAvailability/create)\",\"required\":false},{\"id\":5,\"property\":\"preferredTime\",\"type\":\"string\",\"description\":\"Preferred time in HH:MM format (optional)\",\"required\":false},{\"id\":6,\"property\":\"location\",\"type\":\"string\",\"description\":\"Location: 'Allegheny Avenue' or 'West Philadelphia' (required for create)\",\"required\":false},{\"id\":7,\"property\":\"status\",\"type\":\"string\",\"description\":\"New status for updateAppointment: 'Confirmed', 'Cancelled', 'Completed' (required for update)\",\"required\":false}]",
  "func": "/*\n* Scheduling API - Comprehensive appointment management\n* You can use properties: $operation, $patientId, $appointmentId, $appointmentType, $preferredDate, $preferredTime, $location, $status\n* Must return a string value at the end of function\n*/\n\n// Sample appointment database\nconst sampleAppointments = [\n  {\n    appointmentId: 'APT001',\n    patientId: 'PAT001',\n    patientName: 'Emma Johnson',\n    appointmentType: 'Cleaning',\n    date: '2025-12-15',\n    time: '10:00 AM',\n    location: 'Allegheny Avenue',\n    provider: 'Dr. Smith',\n    status: 'Scheduled'\n  },\n  {\n    appointmentId: 'APT002',\n    patientId: 'PAT003',\n    patientName: 'Sophia Chen',\n    appointmentType: 'New Patient Exam',\n    date: '2026-01-10',\n    time: '2:30 PM',\n    location: 'Allegheny Avenue',\n    provider: 'Dr. Williams',\n    status: 'Scheduled'\n  },\n  {\n    appointmentId: 'APT003',\n    patientId: 'PAT004',\n    patientName: 'James Wilson',\n    appointmentType: 'Ortho Consult',\n    date: '2026-02-20',\n    time: '9:00 AM',\n    location: 'Allegheny Avenue',\n    provider: 'Dr. Brown',\n    status: 'Scheduled'\n  }\n];\n\n// Sample availability slots - RESTRICTED TO NOV 12, 2025 - FEB 28, 2026\nfunction getAvailableSlots(date, appointmentType, location) {\n  const slots = [];\n  \n  // Define valid date range: November 12, 2025 to February 28, 2026\n  const minDate = new Date('2025-11-12');\n  const maxDate = new Date('2026-02-28');\n  \n  // Determine starting date\n  let startDate;\n  if (date) {\n    startDate = new Date(date);\n  } else {\n    const today = new Date();\n    // Use today if within range, otherwise use minDate\n    startDate = today >= minDate && today <= maxDate ? today : minDate;\n  }\n  \n  // Ensure start date is within valid range\n  if (startDate < minDate) {\n    startDate = minDate;\n  }\n  if (startDate > maxDate) {\n    return slots; // No slots available if start date is beyond max date\n  }\n  \n  // Generate slots for up to 14 days or until maxDate, whichever comes first\n  for (let i = 0; i < 14; i++) {\n    const slotDate = new Date(startDate);\n    slotDate.setDate(slotDate.getDate() + i);\n    \n    // Stop if we've reached the max date\n    if (slotDate > maxDate) {\n      break;\n    }\n    \n    // Skip if before min date\n    if (slotDate < minDate) {\n      continue;\n    }\n    \n    const dateStr = slotDate.toISOString().split('T')[0];\n    \n    // Morning slots\n    slots.push({ date: dateStr, time: '9:00 AM', available: true });\n    slots.push({ date: dateStr, time: '10:00 AM', available: true });\n    slots.push({ date: dateStr, time: '11:00 AM', available: true });\n    \n    // Afternoon slots\n    slots.push({ date: dateStr, time: '1:00 PM', available: true });\n    slots.push({ date: dateStr, time: '2:00 PM', available: true });\n    slots.push({ date: dateStr, time: '3:00 PM', available: true });\n    slots.push({ date: dateStr, time: '4:00 PM', available: true });\n  }\n  \n  return slots;\n}\n\n// Patient eligibility rules\nfunction checkPatientEligibility(patientId, appointmentType) {\n  // Sample eligibility - in real system, this would check patient history\n  const eligibleTypes = ['Cleaning', 'New Patient Exam', 'Ortho Consult', 'Baby Wellness', 'Emergency'];\n  return {\n    eligible: eligibleTypes.includes(appointmentType),\n    allowedTypes: eligibleTypes,\n    restrictions: appointmentType === 'Baby Wellness' ? 'Allegheny location only' : null\n  };\n}\n\ntry {\n  const operation = $operation;\n  \n  if (!operation) {\n    return JSON.stringify({\n      success: false,\n      error: 'Operation is required',\n      message: 'Please specify an operation: checkAvailability, createAppointment, updateAppointment, retrieveAppointments, deleteAppointment, or checkEligibility'\n    });\n  }\n  \n  switch (operation) {\n    case 'checkAvailability': {\n      const appointmentType = $appointmentType;\n      const preferredDate = $preferredDate;\n      const location = $location || 'Allegheny Avenue';\n      \n      if (!appointmentType) {\n        return JSON.stringify({\n          success: false,\n          error: 'Appointment type is required',\n          message: 'Please specify appointment type'\n        });\n      }\n      \n      const slots = getAvailableSlots(preferredDate, appointmentType, location);\n      \n      // Filter by preferred date if provided\n      const filteredSlots = preferredDate \n        ? slots.filter(s => s.date === preferredDate)\n        : slots.slice(0, 10); // Return first 10 slots\n      \n      return JSON.stringify({\n        success: true,\n        operation: 'checkAvailability',\n        appointmentType: appointmentType,\n        location: location,\n        preferredDate: preferredDate,\n        availableSlots: filteredSlots,\n        totalAvailable: filteredSlots.length,\n        message: `Found ${filteredSlots.length} available slots`,\n        dateRange: 'November 12, 2025 - February 28, 2026'\n      }, null, 2);\n    }\n    \n    case 'checkEligibility': {\n      const patientId = $patientId;\n      const appointmentType = $appointmentType;\n      \n      if (!patientId || !appointmentType) {\n        return JSON.stringify({\n          success: false,\n          error: 'Patient ID and appointment type are required'\n        });\n      }\n      \n      const eligibility = checkPatientEligibility(patientId, appointmentType);\n      \n      return JSON.stringify({\n        success: true,\n        operation: 'checkEligibility',\n        patientId: patientId,\n        appointmentType: appointmentType,\n        eligible: eligibility.eligible,\n        allowedTypes: eligibility.allowedTypes,\n        restrictions: eligibility.restrictions,\n        message: eligibility.eligible ? 'Patient is eligible for this appointment type' : 'Patient is not eligible for this appointment type'\n      }, null, 2);\n    }\n    \n    case 'retrieveAppointments': {\n      const patientId = $patientId;\n      \n      if (!patientId) {\n        return JSON.stringify({\n          success: false,\n          error: 'Patient ID is required'\n        });\n      }\n      \n      const appointments = sampleAppointments.filter(apt => apt.patientId === patientId);\n      \n      return JSON.stringify({\n        success: true,\n        operation: 'retrieveAppointments',\n        patientId: patientId,\n        appointments: appointments,\n        totalAppointments: appointments.length,\n        message: `Found ${appointments.length} appointment(s)`\n      }, null, 2);\n    }\n    \n    case 'createAppointment': {\n      const patientId = $patientId;\n      const appointmentType = $appointmentType;\n      const preferredDate = $preferredDate;\n      const preferredTime = $preferredTime;\n      const location = $location;\n      \n      if (!patientId || !appointmentType || !preferredDate || !location) {\n        return JSON.stringify({\n          success: false,\n          error: 'Missing required fields',\n          message: 'Patient ID, appointment type, date, and location are required'\n        });\n      }\n      \n      // Validate date is within allowed range\n      const appointmentDate = new Date(preferredDate);\n      const minDate = new Date('2025-11-12');\n      const maxDate = new Date('2026-02-28');\n      \n      if (appointmentDate < minDate || appointmentDate > maxDate) {\n        return JSON.stringify({\n          success: false,\n          error: 'Date out of range',\n          message: 'Appointments can only be scheduled between November 12, 2025 and February 28, 2026'\n        });\n      }\n      \n      // Generate new appointment ID\n      const newAppointmentId = `APT${String(sampleAppointments.length + 1).padStart(3, '0')}`;\n      \n      const newAppointment = {\n        appointmentId: newAppointmentId,\n        patientId: patientId,\n        appointmentType: appointmentType,\n        date: preferredDate,\n        time: preferredTime || '10:00 AM',\n        location: location,\n        provider: 'Dr. Smith', // Would be assigned based on availability\n        status: 'Scheduled',\n        createdAt: new Date().toISOString()\n      };\n      \n      // In real system, this would write to database\n      sampleAppointments.push(newAppointment);\n      \n      return JSON.stringify({\n        success: true,\n        operation: 'createAppointment',\n        appointment: newAppointment,\n        message: 'Appointment created successfully'\n      }, null, 2);\n    }\n    \n    case 'updateAppointment': {\n      const appointmentId = $appointmentId;\n      const status = $status;\n      \n      if (!appointmentId || !status) {\n        return JSON.stringify({\n          success: false,\n          error: 'Appointment ID and status are required'\n        });\n      }\n      \n      const appointment = sampleAppointments.find(apt => apt.appointmentId === appointmentId);\n      \n      if (!appointment) {\n        return JSON.stringify({\n          success: false,\n          error: 'Appointment not found',\n          message: `No appointment found with ID: ${appointmentId}`\n        });\n      }\n      \n      appointment.status = status;\n      appointment.updatedAt = new Date().toISOString();\n      \n      return JSON.stringify({\n        success: true,\n        operation: 'updateAppointment',\n        appointment: appointment,\n        message: `Appointment status updated to ${status}`\n      }, null, 2);\n    }\n    \n    case 'deleteAppointment': {\n      const appointmentId = $appointmentId;\n      \n      if (!appointmentId) {\n        return JSON.stringify({\n          success: false,\n          error: 'Appointment ID is required'\n        });\n      }\n      \n      const appointmentIndex = sampleAppointments.findIndex(apt => apt.appointmentId === appointmentId);\n      \n      if (appointmentIndex === -1) {\n        return JSON.stringify({\n          success: false,\n          error: 'Appointment not found',\n          message: `No appointment found with ID: ${appointmentId}`\n        });\n      }\n      \n      const deletedAppointment = sampleAppointments[appointmentIndex];\n      sampleAppointments.splice(appointmentIndex, 1);\n      \n      return JSON.stringify({\n        success: true,\n        operation: 'deleteAppointment',\n        deletedAppointment: deletedAppointment,\n        message: 'Appointment deleted successfully'\n      }, null, 2);\n    }\n    \n    default:\n      return JSON.stringify({\n        success: false,\n        error: 'Invalid operation',\n        message: `Unknown operation: ${operation}. Valid operations: checkAvailability, createAppointment, updateAppointment, retrieveAppointments, deleteAppointment, checkEligibility`\n      });\n  }\n  \n} catch (error) {\n  console.error('Scheduling API error:', error);\n  return JSON.stringify({\n    success: false,\n    error: error.message,\n    message: 'Scheduling operation temporarily unavailable. Please try again.'\n  });\n}",
  "workspaceId": "9e7c759d-2623-4529-945d-6c578631aad0"
}
